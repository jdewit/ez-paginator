angular.module("ez.paginator",[]),angular.module("ez.paginator").directive("ezPaginatorBar",["EzConfigResolver","EzPaginatorConfig",function(a,b){return{restrict:"EA",scope:{pagination:"=",ezConfig:"=?",onChange:"=?"},templateUrl:"ez_paginator/bar/bar.html",link:function(c,d,e){c.config=a.resolve(c,e,b)}}}]),angular.module("ez.paginator").constant("EzPaginatorConfig",{showBoundaryLinks:!1,showDirectionLinks:!0,firstBtnText:"",firstBtnIconClass:"fa fa-angle-double-left",prevBtnText:"",prevBtnIconClass:"fa fa-angle-left",nextBtnText:"",nextBtnIconClass:"fa fa-angle-right",lastBtnText:"",lastBtnIconClass:"fa fa-angle-double-right",pagerPrevBtnText:"Previous",pagerPrevBtnIconClass:"fa fa-angle-double-left",pagerNextBtnText:"Next",pagerNextBtnIconClass:"fa fa-angle-double-right",maxPages:10,initialPage:1,showPaginator:!0,showState:!0,showLimit:!0,states:[{id:"active",name:"Active"},{id:"deleted",name:"Deleted"}],defaultState:"active",stateToggleClass:"btn btn-default",stateDropdownMenuClass:"dropdown-menu pointer pull-right",stateContainerClass:"dropup",limits:[5,15,25,50],defaultLimit:15,limitToggleClass:"btn btn-default",limitDropdownMenuClass:"dropdown-menu pointer pull-right",limitContainerClass:"dropup"}),angular.module("ez.paginator").directive("ezPaginatorLimit",["$routeParams","$location","EzConfigResolver","EzPaginatorConfig",function(a,b,c,d){return{restrict:"EA",scope:{pagination:"=",ezConfig:"=?",onChange:"=?"},templateUrl:"ez_paginator/limit/limit.html",link:function(e,f,g){e.config=c.resolve(e,g,d);var h="function"==typeof e.onChange;if(!e.pagination.limit||-1===e.config.limits.indexOf(e.pagination.limit)){var i=b.search().limit;!h&&i&&e.config.limits.indexOf(i)&&(e.pagination.limit=i)}e.pagination.limit||(e.pagination.limit=e.config.defaultLimit),e.setLimit=function(c){e.pagination.limit=c,e.pagination.page=1,h?e.onChange(e.pagination):(a.limit=c,a.page=1,b.search(a))}}}}]),angular.module("ez.paginator").directive("ezPager",["EzConfigResolver","EzPaginatorConfig","$location","$routeParams",function(a,b,c,d){return{restrict:"EA",scope:{pagination:"=",ezConfig:"=?",onChange:"=?"},templateUrl:"ez_paginator/pager/pager.html",link:function(e,f,g){var h="function"==typeof e.onChange,i=function(){e.config=a.resolve(e,g,b),e.pagination.items=e.pagination.items||[],e.pagination.page||h||(e.pagination.page=c.search().page),e.pagination.page||(e.pagination.page=e.config.initialPage),e.pagination.limit||(e.pagination.limit=e.config.defaultLimit),e.pagination.pages||(e.pagination.pages=Math.ceil(e.pagination.items.length/e.pagination.limit)||1),e.pagination.itemCount||(e.pagination.itemCount=e.pagination.items.length)};e.selectPage=function(a){1>a?a=1:a>e.pagination.pages&&(a=e.pagination.pages),e.pagination.page=a,h?e.onChange(e.pagination):(d.page=e.pagination.page,c.search(d))},i()}}}]),angular.module("ez.paginator").directive("ezPaginator",["$location","$routeParams","EzPaginatorConfig","EzConfigResolver",function(a,b,c,d){return{restrict:"EA",scope:{pagination:"=",ezConfig:"=?",onChange:"=?"},templateUrl:"ez_paginator/paginator/paginator.html",link:function(e,f,g){function h(){e.pages=[],e.pagination.items||(e.pagination.items=[]),e.pagination.limit||(e.pagination.limit=e.config.defaultLimit),e.pagination.itemCount||(e.pagination.itemCount=e.pagination.items.length),e.pagination.pages||(e.pagination.pages=Math.ceil(e.pagination.items.length/e.pagination.limit)||1);var a=e.pagination.page;if(1!==a){var b=Math.floor(e.config.maxPages/2);a+b>e.pagination.pages?a=e.pagination.pages-e.config.maxPages+1:a-=b,1>a&&(a=1)}for(var c=1,d=e.pagination.pages;d>=a&&c<=e.config.maxPages;c++)e.pages.push({text:a,number:a}),a++}var i="function"==typeof e.onChange;e.config=d.resolve(e,g,c),e.$watch("pagination.pages",function(a,b){a!==b&&h()}),e.pagination.update=function(){e.selectPage(e.pagination.page)},e.selectPage=function(c,d){c||(c=i?e.config.initialPage:a.search().page||e.config.initialPage),c=parseInt(c,10),1>c?c=1:c>e.pagination.pages&&(c=e.pagination.pages),e.pagination.page=c,d||(i?e.onChange(e.pagination):(b.page=e.pagination.page,a.search(b)),(!e.pages.length||e.pages[0].number>e.pagination.page||!e.pages[e.config.maxPages-1]||e.pages[e.config.maxPages-1].number<e.pagination.page)&&h())},e.selectPage(null,!0),h()}}}]),angular.module("ez.paginator").directive("ezPaginatorState",["$routeParams","$location","EzConfigResolver","EzPaginatorConfig",function(a,b,c,d){return{restrict:"EA",scope:{pagination:"=",ezConfig:"=?",onChange:"=?"},templateUrl:"ez_paginator/state/state.html",link:function(e,f,g){e.config=c.resolve(e,g,d);var h="function"==typeof e.onChange;e.pagination.state||(e.pagination.state=h?e.config.defaultState:b.search().state),e.getName=function(a){var b=e.config.states[0];if(a)for(var c=0;c<e.config.states.length;c++)if(e.config.states[c].id===a){b=e.config.states[c];break}return b.name},e.setState=function(c){e.pagination.state=c.id,e.pagination.page=1,h?e.onChange(e.pagination):(a.state=c.id,a.page=1,b.search(a))}}}}]);