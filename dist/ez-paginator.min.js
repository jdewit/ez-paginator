angular.module("ez.paginator",[]),angular.module("ez.paginator").directive("ezPaginatorBar",["EzConfigResolver","EzPaginatorConfig",function(a,b){return{restrict:"EA",scope:{pagination:"=",ezConfig:"=?",onChange:"=?"},templateUrl:"ez_paginator/bar/bar.html",link:function(c,d,e){c.config=a.resolve(c,e,b)}}}]),angular.module("ez.paginator").constant("EzPaginatorConfig",{showBoundaryLinks:!1,showDirectionLinks:!0,firstBtnText:"",firstBtnIconClass:"fa fa-angle-double-left",prevBtnText:"",prevBtnIconClass:"fa fa-angle-left",nextBtnText:"",nextBtnIconClass:"fa fa-angle-right",lastBtnText:"",lastBtnIconClass:"fa fa-angle-double-right",pagerPrevBtnText:"Previous",pagerPrevBtnIconClass:"fa fa-angle-double-left",pagerNextBtnText:"Next",pagerNextBtnIconClass:"fa fa-angle-double-right",maxPages:10,initialPage:1,showPaginator:!0,showState:!0,showLimit:!0,states:[{id:"active",name:"Active"},{id:"deleted",name:"Deleted"}],defaultState:"active",stateToggleClass:"btn btn-default",stateDropdownMenuClass:"dropdown-menu pointer pull-right",stateContainerClass:"dropup",limits:[5,15,25,50],defaultLimit:15,limitToggleClass:"btn btn-default",limitDropdownMenuClass:"dropdown-menu pointer pull-right",limitContainerClass:"dropup"}),angular.module("ez.paginator").directive("ezPaginatorLimit",["$routeParams","$location","EzConfigResolver","EzPaginatorConfig",function(a,b,c,d){return{restrict:"EA",scope:{pagination:"=",ezConfig:"=?",onChange:"=?"},templateUrl:"ez_paginator/limit/limit.html",link:function(e,f,g){e.config=c.resolve(e,g,d);var h="function"==typeof e.onChange;if(!e.pagination.limit||-1===e.config.limits.indexOf(e.pagination.limit)){var i=b.search().limit;!h&&i&&e.config.limits.indexOf(i)&&(e.pagination.limit=i)}e.pagination.limit||(e.pagination.limit=e.config.defaultLimit),e.setLimit=function(c){e.pagination.limit=c,e.pagination.page=1,h?e.onChange(e.pagination):(a.limit=c,b.search(a))}}}}]),angular.module("ez.paginator").directive("ezPager",["EzConfigResolver","EzPaginatorConfig","$location","$routeParams",function(a,b,c,d){return{restrict:"EA",scope:{pagination:"=",ezConfig:"=?",onChange:"=?"},templateUrl:"ez_paginator/pager/pager.html",link:function(e,f,g){var h="function"==typeof e.onChange,i=function(){e.config=a.resolve(e,g,b),e.pagination.items=e.pagination.items||[],e.pagination.page||h||(e.pagination.page=c.search().page),e.pagination.page||(e.pagination.page=e.config.initialPage),e.pagination.limit||(e.pagination.limit=e.config.defaultLimit),e.pagination.pages||(e.pagination.pages=Math.ceil(e.pagination.items.length/e.pagination.limit)||1),e.pagination.itemCount||(e.pagination.itemCount=e.pagination.items.length)};e.selectPage=function(a){1>a?a=1:a>e.pagination.pages&&(a=e.pagination.pages),e.pagination.page=a,h?e.onChange(e.pagination):(d.page=e.pagination.page,c.search(d))},i()}}}]),angular.module("ez.paginator").directive("ezPaginator",["$location","$routeParams","EzPaginatorConfig","EzConfigResolver",function(a,b,c,d){return{restrict:"EA",scope:{pagination:"=",ezConfig:"=?",onChange:"=?"},templateUrl:"ez_paginator/paginator/paginator.html",link:function(e,f,g){var h="function"==typeof e.onChange,i=e.pagination.page;e.config=d.resolve(e,g,c),e.$watch("pagination.page",function(a,b){a!==b&&a!==i&&e.selectPage(a,"init")}),e.$watch("pagination.pages",function(a,b){a!==b&&e.selectPage(e.config.initialPage,"init")}),e.pagination.update=function(){e.selectPage(e.pagination.page,"init")},setInterval(function(){e.$apply()},2e3),e.selectPage=function(c,d){c||(c=h?e.config.initialPage:a.search().page||e.config.initialPage),c=parseInt(c,10),e.pagination.items||(e.pagination.items=[]),e.pagination.limit||(e.pagination.limit=e.config.defaultLimit),e.pagination.itemCount||(e.pagination.itemCount=e.pagination.items.length),e.pagination.pages||(e.pagination.pages=Math.ceil(e.pagination.items.length/e.pagination.limit)||1),i=c;var f=c;if("next"===d){if(c>e.pagination.pages)return;e.pages[e.pages.length-1].number===c-1&&(d="right")}else if("prev"===d){if(1>c)return;e.pages[0].number===c+1&&(c=c-e.config.maxPages+1,d="left")}if(d&&"next"!==d&&"prev"!==d){if("left"===d)1>c&&(c=1),f=c,c=c+e.config.maxPages-1;else if("right"===d)f+e.config.maxPages>e.pagination.pages&&(f=e.pagination.pages-e.config.maxPages+1);else if("last"===d)f=e.pagination.pages-e.config.maxPages+1;else if("init"===d&&1!==c){var g=Math.floor(e.config.maxPages/2);f=c+g>e.pagination.pages?e.pagination.pages-e.config.maxPages:c-g,1>f&&(f=1)}e.pages=[];for(var j=1,k=e.pagination.pages;k>=f&&j<=e.config.maxPages;j++)e.pages.push({text:f,number:f}),f++}1>c?c=1:c>e.pagination.pages&&(c=e.pagination.pages),e.pagination.page=c,"init"!==d&&(h?e.onChange(e.pagination):(b.page=e.pagination.page,a.search(b)))},e.selectPage(e.pagination.page,"init")}}}]),angular.module("ez.paginator").directive("ezPaginatorState",["$routeParams","$location","EzConfigResolver","EzPaginatorConfig",function(a,b,c,d){return{restrict:"EA",scope:{pagination:"=",ezConfig:"=?",onChange:"=?"},templateUrl:"ez_paginator/state/state.html",link:function(e,f,g){e.config=c.resolve(e,g,d);var h="function"==typeof e.onChange;e.pagination.state||(e.pagination.state=h?e.config.defaultState:b.search().state),e.getName=function(a){var b=e.config.states[0];if(a)for(var c=0;c<e.config.states.length;c++)if(e.config.states[c].id===a){b=e.config.states[c];break}return b.name},e.setState=function(c){e.pagination.state=c.id,e.pagination.page=1,h?e.onChange(e.pagination):(a.state=c.id,a.page=1,b.search(a))}}}}]);